#!/usr/bin/env python

from sys import argv, exit
import math

if len(argv) != 4:
    print("Usage: python calcDing minus.counts plus.counts output.txt")
    exit(-1)

def convert(arr):
    res = [math.log(float(x) + 1.0) for x in arr]
    l = float(len(res))
    res.append(0.0)
    denom = sum(res) / l
    res = [(x / denom if denom > 0.0 else 0.0) for x in res]
    return res

fm = open(argv[1])
fp = open(argv[2])
fout = open(argv[3], "w")

cnt = 0

for line in fm:
    line2 = fp.readline()

    if cnt >= 0:
        mc = convert(line[:-1].split())
        mp = convert(line2[:-1].split())
        ding = [max(y - x, 0) for (x, y) in zip(mc, mp)]
        fout.write(" ".join([str(x) for x in ding]) + "\n")

    cnt = cnt + 1
    if cnt % 1000 == 0:
        print("{} FIN!".format(cnt))

fm.close()
fp.close()
fout.close()
